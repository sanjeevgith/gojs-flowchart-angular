/**
 * @fileoverview added by tsickle
 * Generated from: lib/diagram.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ElementRef, EventEmitter, Input, NgZone, Output, ViewChild } from '@angular/core';
import * as go from 'gojs';
import { NgDiagramHelper } from './ng-diagram-helper';
export class DiagramComponent {
    /**
     * @param {?} zone
     */
    constructor(zone) {
        this.zone = zone;
        /**
         * Link data for diagram. Optional.
         */
        this.linkDataArray = null;
        /**
         * Model data for diagram. Optional.
         */
        this.modelData = null;
        /**
         * Model changed listener function for diagram
         */
        this.modelChangedListener = null;
        /**
         * Whether or not to skip merging app data with GoJS model data (set to true if update is coming from GoJS, false if coming from app-level, usually)
         */
        this.skipsDiagramUpdate = false;
        /**
         * Event emitter -- fires when diagram model changes. Capture this emitted event in parent component
         */
        this.modelChange = new EventEmitter();
        /**
         * The Diagram itself
         */
        this.diagram = null;
        /**
         * An internal flag used to tell ngOnChanges to treat the next sync operation as a Diagram initialization
         */
        this.wasCleared = false;
    }
    /**
     * Initializes diagram / model after view init
     * @return {?}
     */
    ngAfterViewInit() {
        if (!this.diagramDiv) {
            throw new Error("diagramDiv is not defined");
        }
        this.diagram = this.initDiagram();
        if (!(this.diagram instanceof go.Diagram)) {
            throw new Error("initDiagram function did not return a go.Diagram");
        }
        // reduces change detection on mouse moves, boosting performance
        NgDiagramHelper.makeMouseMoveRunOutsideAngularZone(this.diagram, this.zone);
        // assign the Diagram's div, which (among many other things) will attach a bunch of listeners to the canvas,
        // using the overridden addEventListener function defined in makeMouseMoveRunOutsideAngularZone
        /** @type {?} */
        const divRef = this.diagramDiv.nativeElement;
        if (divRef === null)
            return;
        this.diagram.div = divRef;
        // initialize the diagram model with the provided node / link / model data
        NgDiagramHelper.initializeModel(this.diagram, this.nodeDataArray, this.linkDataArray, this.modelData);
        // initializer model listener
        NgDiagramHelper.initializeModelChangedListener(this);
    } // end ngAfterViewInit
    // end ngAfterViewInit
    /**
     * If a change has occurred on an \@Input property, merge the app-level changes with GoJS
     * @return {?}
     */
    ngOnChanges() {
        if (!this.diagram || !this.diagram.model || this.skipsDiagramUpdate)
            return;
        // if clear was just called, treat this as initial
        if (this.wasCleared) {
            this.diagram.delayInitialization((/**
             * @return {?}
             */
            () => {
                NgDiagramHelper.mergeAppDataWithModel(this, true);
            }));
            this.wasCleared = false;
        }
        else {
            NgDiagramHelper.mergeAppDataWithModel(this);
        }
    } // end ngOnChanges
    // end ngOnChanges
    /**
     * Clears the diagram of all nodes, links, and model data.
     * Also clears the UndoManager history and clipboard.
     * The next state update will be treated as diagram initialization.
     * @return {?}
     */
    clear() {
        /** @type {?} */
        const diagram = this.diagram;
        if (diagram !== null) {
            diagram.clear();
            this.wasCleared = true;
        }
    } // end clear function
    // end clear function
    /**
     * Set this.diagram.div to null, removing all event listeners
     * @return {?}
     */
    ngOnDestroy() {
        this.diagram.div = null; // removes event listeners
    } // end ngOnDestroy function
}
DiagramComponent.decorators = [
    { type: Component, args: [{
                selector: 'gojs-diagram',
                template: '<div #ngDiagram [className]=divClassName></div>'
            }] }
];
/** @nocollapse */
DiagramComponent.ctorParameters = () => [
    { type: NgZone }
];
DiagramComponent.propDecorators = {
    initDiagram: [{ type: Input }],
    nodeDataArray: [{ type: Input }],
    linkDataArray: [{ type: Input }],
    modelData: [{ type: Input }],
    divClassName: [{ type: Input }],
    skipsDiagramUpdate: [{ type: Input }],
    modelChange: [{ type: Output }],
    diagramDiv: [{ type: ViewChild, args: ['ngDiagram', { static: true },] }]
};
if (false) {
    /**
     * Diagram initialization function. Returns a go.Diagram.
     * Do not initialize model data in this function.
     * @type {?}
     */
    DiagramComponent.prototype.initDiagram;
    /**
     * Node data for diagram
     * @type {?}
     */
    DiagramComponent.prototype.nodeDataArray;
    /**
     * Link data for diagram. Optional.
     * @type {?}
     */
    DiagramComponent.prototype.linkDataArray;
    /**
     * Model data for diagram. Optional.
     * @type {?}
     */
    DiagramComponent.prototype.modelData;
    /**
     * Diagram div class name. Use this name to style your diagram in CSS.
     * @type {?}
     */
    DiagramComponent.prototype.divClassName;
    /**
     * Model changed listener function for diagram
     * @type {?}
     */
    DiagramComponent.prototype.modelChangedListener;
    /**
     * Whether or not to skip merging app data with GoJS model data (set to true if update is coming from GoJS, false if coming from app-level, usually)
     * @type {?}
     */
    DiagramComponent.prototype.skipsDiagramUpdate;
    /**
     * Event emitter -- fires when diagram model changes. Capture this emitted event in parent component
     * @type {?}
     */
    DiagramComponent.prototype.modelChange;
    /**
     * The DIV element holding the Diagram
     * @type {?}
     */
    DiagramComponent.prototype.diagramDiv;
    /**
     * The Diagram itself
     * @type {?}
     */
    DiagramComponent.prototype.diagram;
    /**
     * An internal flag used to tell ngOnChanges to treat the next sync operation as a Diagram initialization
     * @type {?}
     * @private
     */
    DiagramComponent.prototype.wasCleared;
    /** @type {?} */
    DiagramComponent.prototype.zone;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGlhZ3JhbS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiQzovVXNlcnMvcmpvaG4vRG9jdW1lbnRzL0dpdEh1Yi9nb2pzLWFuZ3VsYXIvcHJvamVjdHMvZ29qcy1hbmd1bGFyL3NyYy8iLCJzb3VyY2VzIjpbImxpYi9kaWFncmFtLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDdEcsT0FBTyxLQUFLLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDM0IsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBTXRELE1BQU0sT0FBTyxnQkFBZ0I7Ozs7SUE0QjNCLFlBQW1CLElBQVk7UUFBWixTQUFJLEdBQUosSUFBSSxDQUFROzs7O1FBbEJmLGtCQUFhLEdBQXlCLElBQUksQ0FBQzs7OztRQUUzQyxjQUFTLEdBQWtCLElBQUksQ0FBQzs7OztRQUl6Qyx5QkFBb0IsR0FBMEMsSUFBSSxDQUFDOzs7O1FBRTFELHVCQUFrQixHQUFZLEtBQUssQ0FBQzs7OztRQUVuQyxnQkFBVyxHQUFxQyxJQUFJLFlBQVksRUFBc0IsQ0FBQzs7OztRQUlqRyxZQUFPLEdBQWUsSUFBSSxDQUFDOzs7O1FBRTFCLGVBQVUsR0FBRyxLQUFLLENBQUM7SUFFUyxDQUFDOzs7OztJQUs5QixlQUFlO1FBQ3BCLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFO1lBQ3BCLE1BQU0sSUFBSSxLQUFLLENBQUMsMkJBQTJCLENBQUMsQ0FBQztTQUM5QztRQUNELElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQ2xDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLFlBQVksRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQ3pDLE1BQU0sSUFBSSxLQUFLLENBQUMsa0RBQWtELENBQUMsQ0FBQztTQUNyRTtRQUVELGdFQUFnRTtRQUNoRSxlQUFlLENBQUMsa0NBQWtDLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7Ozs7Y0FJdEUsTUFBTSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsYUFBYTtRQUM1QyxJQUFJLE1BQU0sS0FBSyxJQUFJO1lBQUUsT0FBTztRQUM1QixJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsR0FBRyxNQUFNLENBQUM7UUFFMUIsMEVBQTBFO1FBQzFFLGVBQWUsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsYUFBYSxFQUFFLElBQUksQ0FBQyxhQUFhLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ3RHLDZCQUE2QjtRQUM3QixlQUFlLENBQUMsOEJBQThCLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDdkQsQ0FBQyxDQUFDLHNCQUFzQjs7Ozs7O0lBS2pCLFdBQVc7UUFDaEIsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsa0JBQWtCO1lBQUUsT0FBTztRQUM1RSxrREFBa0Q7UUFDbEQsSUFBSSxJQUFJLENBQUMsVUFBVSxFQUFFO1lBQ25CLElBQUksQ0FBQyxPQUFPLENBQUMsbUJBQW1COzs7WUFBQyxHQUFHLEVBQUU7Z0JBQ3BDLGVBQWUsQ0FBQyxxQkFBcUIsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFDcEQsQ0FBQyxFQUFDLENBQUM7WUFDSCxJQUFJLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQztTQUN6QjthQUFNO1lBQ0wsZUFBZSxDQUFDLHFCQUFxQixDQUFDLElBQUksQ0FBQyxDQUFDO1NBQzdDO0lBQ0gsQ0FBQyxDQUFDLGtCQUFrQjs7Ozs7Ozs7SUFPWixLQUFLOztjQUNMLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTztRQUM1QixJQUFJLE9BQU8sS0FBSyxJQUFJLEVBQUU7WUFDcEIsT0FBTyxDQUFDLEtBQUssRUFBRSxDQUFDO1lBQ2hCLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO1NBQ3hCO0lBQ0gsQ0FBQyxDQUFDLHFCQUFxQjs7Ozs7O0lBS2hCLFdBQVc7UUFDaEIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLENBQUMsMEJBQTBCO0lBQ3JELENBQUMsQ0FBQywyQkFBMkI7OztZQS9GOUIsU0FBUyxTQUFDO2dCQUNULFFBQVEsRUFBRSxjQUFjO2dCQUN4QixRQUFRLEVBQUUsaURBQWlEO2FBQzVEOzs7O1lBUG9ELE1BQU07OzswQkFjeEQsS0FBSzs0QkFFTCxLQUFLOzRCQUVMLEtBQUs7d0JBRUwsS0FBSzsyQkFFTCxLQUFLO2lDQUlMLEtBQUs7MEJBRUwsTUFBTTt5QkFFTixTQUFTLFNBQUMsV0FBVyxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRTs7Ozs7Ozs7SUFoQnhDLHVDQUE4Qzs7Ozs7SUFFOUMseUNBQW9EOzs7OztJQUVwRCx5Q0FBMkQ7Ozs7O0lBRTNELHFDQUFnRDs7Ozs7SUFFaEQsd0NBQXFDOzs7OztJQUVyQyxnREFBMEU7Ozs7O0lBRTFFLDhDQUFvRDs7Ozs7SUFFcEQsdUNBQXdHOzs7OztJQUV4RyxzQ0FBd0U7Ozs7O0lBRXhFLG1DQUFrQzs7Ozs7O0lBRWxDLHNDQUEyQjs7SUFFZixnQ0FBbUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIEVsZW1lbnRSZWYsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE5nWm9uZSwgT3V0cHV0LCBWaWV3Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0ICogYXMgZ28gZnJvbSAnZ29qcyc7XHJcbmltcG9ydCB7IE5nRGlhZ3JhbUhlbHBlciB9IGZyb20gJy4vbmctZGlhZ3JhbS1oZWxwZXInO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdnb2pzLWRpYWdyYW0nLFxyXG4gIHRlbXBsYXRlOiAnPGRpdiAjbmdEaWFncmFtIFtjbGFzc05hbWVdPWRpdkNsYXNzTmFtZT48L2Rpdj4nXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBEaWFncmFtQ29tcG9uZW50IHtcclxuXHJcbiAgLyoqXHJcbiAgICogRGlhZ3JhbSBpbml0aWFsaXphdGlvbiBmdW5jdGlvbi4gUmV0dXJucyBhIGdvLkRpYWdyYW0uXHJcbiAgICogRG8gbm90IGluaXRpYWxpemUgbW9kZWwgZGF0YSBpbiB0aGlzIGZ1bmN0aW9uLlxyXG4gICAqL1xyXG4gIEBJbnB1dCgpIHB1YmxpYyBpbml0RGlhZ3JhbTogKCkgPT4gZ28uRGlhZ3JhbTtcclxuICAvKiogIE5vZGUgZGF0YSBmb3IgZGlhZ3JhbSAqL1xyXG4gIEBJbnB1dCgpIHB1YmxpYyBub2RlRGF0YUFycmF5OiBBcnJheTxnby5PYmplY3REYXRhPjtcclxuICAvKiogIExpbmsgZGF0YSBmb3IgZGlhZ3JhbS4gT3B0aW9uYWwuICovXHJcbiAgQElucHV0KCkgcHVibGljIGxpbmtEYXRhQXJyYXk6IEFycmF5PGdvLk9iamVjdERhdGE+ID0gbnVsbDtcclxuICAvKiogTW9kZWwgZGF0YSBmb3IgZGlhZ3JhbS4gT3B0aW9uYWwuICovXHJcbiAgQElucHV0KCkgcHVibGljIG1vZGVsRGF0YTogZ28uT2JqZWN0RGF0YSA9IG51bGw7XHJcbiAgLyoqIERpYWdyYW0gZGl2IGNsYXNzIG5hbWUuIFVzZSB0aGlzIG5hbWUgdG8gc3R5bGUgeW91ciBkaWFncmFtIGluIENTUy4gKi9cclxuICBASW5wdXQoKSBwdWJsaWMgZGl2Q2xhc3NOYW1lOiBzdHJpbmc7XHJcbiAgLyoqIE1vZGVsIGNoYW5nZWQgbGlzdGVuZXIgZnVuY3Rpb24gZm9yIGRpYWdyYW0gKi9cclxuICBwdWJsaWMgbW9kZWxDaGFuZ2VkTGlzdGVuZXI6ICgoZTogZ28uQ2hhbmdlZEV2ZW50KSA9PiB2b2lkKSB8IG51bGwgPSBudWxsO1xyXG4gIC8qKiBXaGV0aGVyIG9yIG5vdCB0byBza2lwIG1lcmdpbmcgYXBwIGRhdGEgd2l0aCBHb0pTIG1vZGVsIGRhdGEgKHNldCB0byB0cnVlIGlmIHVwZGF0ZSBpcyBjb21pbmcgZnJvbSBHb0pTLCBmYWxzZSBpZiBjb21pbmcgZnJvbSBhcHAtbGV2ZWwsIHVzdWFsbHkpICovXHJcbiAgQElucHV0KCkgcHVibGljIHNraXBzRGlhZ3JhbVVwZGF0ZTogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIC8qKiBFdmVudCBlbWl0dGVyIC0tIGZpcmVzIHdoZW4gZGlhZ3JhbSBtb2RlbCBjaGFuZ2VzLiBDYXB0dXJlIHRoaXMgZW1pdHRlZCBldmVudCBpbiBwYXJlbnQgY29tcG9uZW50ICovXHJcbiAgQE91dHB1dCgpIHB1YmxpYyBtb2RlbENoYW5nZTogRXZlbnRFbWl0dGVyPGdvLkluY3JlbWVudGFsRGF0YT4gPSBuZXcgRXZlbnRFbWl0dGVyPGdvLkluY3JlbWVudGFsRGF0YT4oKTtcclxuICAvKiogVGhlIERJViBlbGVtZW50IGhvbGRpbmcgdGhlIERpYWdyYW0gKi9cclxuICBAVmlld0NoaWxkKCduZ0RpYWdyYW0nLCB7IHN0YXRpYzogdHJ1ZSB9KSBwdWJsaWMgZGlhZ3JhbURpdjogRWxlbWVudFJlZjtcclxuICAvKiogVGhlIERpYWdyYW0gaXRzZWxmICovXHJcbiAgcHVibGljIGRpYWdyYW06IGdvLkRpYWdyYW0gPSBudWxsO1xyXG4gIC8qKiBBbiBpbnRlcm5hbCBmbGFnIHVzZWQgdG8gdGVsbCBuZ09uQ2hhbmdlcyB0byB0cmVhdCB0aGUgbmV4dCBzeW5jIG9wZXJhdGlvbiBhcyBhIERpYWdyYW0gaW5pdGlhbGl6YXRpb24gKi9cclxuICBwcml2YXRlIHdhc0NsZWFyZWQgPSBmYWxzZTtcclxuXHJcbiAgY29uc3RydWN0b3IocHVibGljIHpvbmU6IE5nWm9uZSkgeyAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbml0aWFsaXplcyBkaWFncmFtIC8gbW9kZWwgYWZ0ZXIgdmlldyBpbml0XHJcbiAgICovXHJcbiAgcHVibGljIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcclxuICAgIGlmICghdGhpcy5kaWFncmFtRGl2KSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcImRpYWdyYW1EaXYgaXMgbm90IGRlZmluZWRcIik7XHJcbiAgICB9XHJcbiAgICB0aGlzLmRpYWdyYW0gPSB0aGlzLmluaXREaWFncmFtKCk7XHJcbiAgICBpZiAoISh0aGlzLmRpYWdyYW0gaW5zdGFuY2VvZiBnby5EaWFncmFtKSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbml0RGlhZ3JhbSBmdW5jdGlvbiBkaWQgbm90IHJldHVybiBhIGdvLkRpYWdyYW1cIik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmVkdWNlcyBjaGFuZ2UgZGV0ZWN0aW9uIG9uIG1vdXNlIG1vdmVzLCBib29zdGluZyBwZXJmb3JtYW5jZVxyXG4gICAgTmdEaWFncmFtSGVscGVyLm1ha2VNb3VzZU1vdmVSdW5PdXRzaWRlQW5ndWxhclpvbmUodGhpcy5kaWFncmFtLCB0aGlzLnpvbmUpO1xyXG5cclxuICAgIC8vIGFzc2lnbiB0aGUgRGlhZ3JhbSdzIGRpdiwgd2hpY2ggKGFtb25nIG1hbnkgb3RoZXIgdGhpbmdzKSB3aWxsIGF0dGFjaCBhIGJ1bmNoIG9mIGxpc3RlbmVycyB0byB0aGUgY2FudmFzLFxyXG4gICAgLy8gdXNpbmcgdGhlIG92ZXJyaWRkZW4gYWRkRXZlbnRMaXN0ZW5lciBmdW5jdGlvbiBkZWZpbmVkIGluIG1ha2VNb3VzZU1vdmVSdW5PdXRzaWRlQW5ndWxhclpvbmVcclxuICAgIGNvbnN0IGRpdlJlZiA9IHRoaXMuZGlhZ3JhbURpdi5uYXRpdmVFbGVtZW50O1xyXG4gICAgaWYgKGRpdlJlZiA9PT0gbnVsbCkgcmV0dXJuO1xyXG4gICAgdGhpcy5kaWFncmFtLmRpdiA9IGRpdlJlZjtcclxuXHJcbiAgICAvLyBpbml0aWFsaXplIHRoZSBkaWFncmFtIG1vZGVsIHdpdGggdGhlIHByb3ZpZGVkIG5vZGUgLyBsaW5rIC8gbW9kZWwgZGF0YVxyXG4gICAgTmdEaWFncmFtSGVscGVyLmluaXRpYWxpemVNb2RlbCh0aGlzLmRpYWdyYW0sIHRoaXMubm9kZURhdGFBcnJheSwgdGhpcy5saW5rRGF0YUFycmF5LCB0aGlzLm1vZGVsRGF0YSk7XHJcbiAgICAvLyBpbml0aWFsaXplciBtb2RlbCBsaXN0ZW5lclxyXG4gICAgTmdEaWFncmFtSGVscGVyLmluaXRpYWxpemVNb2RlbENoYW5nZWRMaXN0ZW5lcih0aGlzKTtcclxuICB9IC8vIGVuZCBuZ0FmdGVyVmlld0luaXRcclxuXHJcbiAgLyoqXHJcbiAgICogSWYgYSBjaGFuZ2UgaGFzIG9jY3VycmVkIG9uIGFuIEBJbnB1dCBwcm9wZXJ0eSwgbWVyZ2UgdGhlIGFwcC1sZXZlbCBjaGFuZ2VzIHdpdGggR29KU1xyXG4gICAqL1xyXG4gIHB1YmxpYyBuZ09uQ2hhbmdlcygpIHtcclxuICAgIGlmICghdGhpcy5kaWFncmFtIHx8ICF0aGlzLmRpYWdyYW0ubW9kZWwgfHwgdGhpcy5za2lwc0RpYWdyYW1VcGRhdGUpIHJldHVybjtcclxuICAgIC8vIGlmIGNsZWFyIHdhcyBqdXN0IGNhbGxlZCwgdHJlYXQgdGhpcyBhcyBpbml0aWFsXHJcbiAgICBpZiAodGhpcy53YXNDbGVhcmVkKSB7XHJcbiAgICAgIHRoaXMuZGlhZ3JhbS5kZWxheUluaXRpYWxpemF0aW9uKCgpID0+IHtcclxuICAgICAgICBOZ0RpYWdyYW1IZWxwZXIubWVyZ2VBcHBEYXRhV2l0aE1vZGVsKHRoaXMsIHRydWUpO1xyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy53YXNDbGVhcmVkID0gZmFsc2U7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBOZ0RpYWdyYW1IZWxwZXIubWVyZ2VBcHBEYXRhV2l0aE1vZGVsKHRoaXMpO1xyXG4gICAgfVxyXG4gIH0gLy8gZW5kIG5nT25DaGFuZ2VzXHJcblxyXG4gIC8qKlxyXG4gICAqIENsZWFycyB0aGUgZGlhZ3JhbSBvZiBhbGwgbm9kZXMsIGxpbmtzLCBhbmQgbW9kZWwgZGF0YS5cclxuICAgKiBBbHNvIGNsZWFycyB0aGUgVW5kb01hbmFnZXIgaGlzdG9yeSBhbmQgY2xpcGJvYXJkLlxyXG4gICAqIFRoZSBuZXh0IHN0YXRlIHVwZGF0ZSB3aWxsIGJlIHRyZWF0ZWQgYXMgZGlhZ3JhbSBpbml0aWFsaXphdGlvbi5cclxuICAgKi9cclxuICAgcHVibGljIGNsZWFyKCk6IHZvaWQge1xyXG4gICAgY29uc3QgZGlhZ3JhbSA9IHRoaXMuZGlhZ3JhbTtcclxuICAgIGlmIChkaWFncmFtICE9PSBudWxsKSB7XHJcbiAgICAgIGRpYWdyYW0uY2xlYXIoKTtcclxuICAgICAgdGhpcy53YXNDbGVhcmVkID0gdHJ1ZTtcclxuICAgIH1cclxuICB9IC8vIGVuZCBjbGVhciBmdW5jdGlvblxyXG5cclxuICAvKipcclxuICAgKiBTZXQgdGhpcy5kaWFncmFtLmRpdiB0byBudWxsLCByZW1vdmluZyBhbGwgZXZlbnQgbGlzdGVuZXJzXHJcbiAgICovXHJcbiAgcHVibGljIG5nT25EZXN0cm95KCkge1xyXG4gICAgdGhpcy5kaWFncmFtLmRpdiA9IG51bGw7IC8vIHJlbW92ZXMgZXZlbnQgbGlzdGVuZXJzXHJcbiAgfSAvLyBlbmQgbmdPbkRlc3Ryb3kgZnVuY3Rpb25cclxuXHJcbn1cclxuIl19